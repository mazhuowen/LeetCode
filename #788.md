[toc]

```java
class Solution {
    public int rotatedDigits(int N) {
        int count = 0;
        if (N < 1) return 0;
        for (int i = 1; i <= N; i++) {
            if (isValid(i)) count++;
        }
        return count;
    }

    private boolean isValid(int n) {
        String num = Integer.toString(n);
        char[] nums = num.toCharArray();

        for (char c : nums) {
            if (c == '3' || c == '4' || c == '7') return false;
        }
        int left = 0, right = nums.length - 1;
        while (left < right) {
            nums[left++] = reverse(nums[left]);
            nums[right--] = reverse(nums[right]);
        }
        if (left == right) nums[left] = reverse(nums[left]);
        return n != Integer.valueOf(new String(nums));
    }

    private char reverse(char c) {
        switch (c) {
            case '6':
                return '9';
            case '9':
                return '6';
            case '2':
                return '5';
            case '5':
                return '2';
            default:
                return c;
        }
    }
}
```
