[toc]

```java
class Solution {
    public boolean circularArrayLoop(int[] nums) {
        for (int i = 0; i < nums.length; i++) {
            // 顺时针逆时针
            int next = getIdx(i + nums[i], nums.length);
            // 循环长度记录
            int len = 1;
            while (next != i){
                // 方向不一致或超出数组限制
                if (nums[next] * nums[i] < 0 || len > nums.length) break;
                next = getIdx(next + nums[next], nums.length);
                len++;
            }
            if (i == next && len > 1) return true;
        }
        return false;
    }

    private int getIdx(int idx, int len) {
        if (idx >= 0 && idx < len) return idx;
        if (idx < 0) return (len + idx % len) % len;
        else return idx % len;
    }
}
```
