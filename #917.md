[toc]

```java
class Solution {
    public String reverseOnlyLetters(String S) {
        if (S == null || S.isEmpty()) return S;

        char[] str = S.toCharArray();
        int left = 0, right = str.length - 1;
        while (left < right) {
            while (left < right && !Character.isLetter(str[left])) left++;
            while (left < right && !Character.isLetter(str[right])) right--;
            if (left < right) swap(str, left++, right--);
        }
        return new String(str);
    }

    private void swap(char[] str, int i, int j) {
        char temp = str[i];
        str[i] = str[j];
        str[j] = temp;
    }
}
```
